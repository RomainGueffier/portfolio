---
import Button from '../../Button.astro'
import Icon from '../../Icon.astro'

import './styles.css'
---

<Button data-theme="auto" id="dark-mode-btn" ariaLabel="Toggle color mode">
  <div class="auto"><Icon name="clock" width={32} height={32} /></div>
  <div class="light"><Icon name="moon" width={32} height={32} /></div>
  <div class="dark"><Icon name="sun" width={32} height={32} /></div>
</Button>
<script is:inline>
  const darkModeBtn = document.querySelector('#dark-mode-btn')
  if (darkModeBtn) {
    darkModeBtn.addEventListener('click', () => {
      console.log(darkModeBtn.dataset.theme)
      switch (darkModeBtn.dataset.theme) {
        case 'dark':
          localStorage.theme = 'light'
          break
        case 'light':
          localStorage.removeItem('theme')
          break
        default:
          localStorage.theme = 'dark'
          break
      }
      darkModeBtn.dataset.theme = localStorage?.theme || 'auto'
      localStorage?.theme === 'dark'
        ? document.documentElement.classList.add('dark')
        : document.documentElement.classList.remove('dark')
    })
  }
</script>

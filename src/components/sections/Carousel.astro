---
import Anchor from '../Anchor.astro'
import Icon from '../Icon.astro'
---

<section
  id="carousel-section"
  class="overflow-hidden bg-slate-50 py-20 dark:bg-slate-600"
>
  <div class="container mx-auto text-center">
    <h2 class="mb-10 text-2xl font-semibold md:text-4xl">
      Companies collaborations
    </h2>
    <div
      id="image-carousel"
      class="splide mx-auto my-20 animate-fadein xl:w-fit xl:px-20"
      aria-label="Projects image slider"
    >
      <div class="splide__arrows">
        <button class="splide__arrow splide__arrow--prev">
          <Icon name="caret-left" />
        </button>
        <button class="splide__arrow splide__arrow--next">
          <Icon name="caret-right" />
        </button>
      </div>

      <div class="splide__track">
        <ul class="splide__list">
          <li class="splide__slide badge univirtual">
            <a href="https://www.univirtual.ch" target="_blank">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                xml:space="preserve"
                id="Layer_1"
                x="0"
                y="0"
                viewBox="0 0 440 115"
                class="size-full object-cover object-center"
              >
                <path
                  d="M8.8 45.6h4.7v15.9H8.8zM39.3 45.6H44v15.9h-4.7zM39.3 65.5H44v4.4c0 10.2-5.4 16.3-17.6 16.3-12.6 0-17.6-6.1-17.6-16.3v-4.4h4.7V70c0 8.4 4.5 11.6 12.9 11.6S39.3 78.4 39.3 70v-4.5zM62.8 65.5h4.7v19.9h-4.7zM80 61.5h-5.5l-6.9-8.6h-.1v8.6h-4.7V45.6h4.7zM93.5 45.6h4.7v15.9h-4.7zM93.5 65.5h4.7v19.9h-4.7L77.6 65.5h5.6l10.2 13h.1zM116.7 45.6h4.7v15.9h-4.7zM116.7 65.5h4.7v19.9h-4.7z"
                  class="fill-[#ae1e24]"></path>
                <path
                  d="M146.1 61.5h-5.3l-7.6-15.9h5.3zM160.6 65.5h5.2l-9.6 19.9h-4l-9.5-19.9h5.3l6.3 13.2zM175.3 45.6l-7.6 15.9h-5.2l7.5-15.9zM187.1 45.6h4.7v15.9h-4.7zM187.1 65.5h4.7v19.9h-4.7zM229.7 45.6h-19.9v15.9h4.6V50.2h18c4.3 0 8.7 1.9 8.7 6.8 0 2-.4 3.5-1.1 4.5h5.2c.4-1.3.6-2.8.6-4.5 0-10.3-10.1-11.4-16.1-11.4zm5.9 23.2c2.5-.2 5.3-1.1 7.3-3.3h-33.1v19.9h4.7V68.8h15.8l9.2 16.6h5.4l-9.3-16.6zM270.4 65.5h4.7v19.9h-4.7zM289.7 45.5v4.7h-14.6v11.3h-4.7V50.2h-14.6v-4.7zM303.8 45.6h4.7v15.9h-4.7zM334.3 45.6h4.7v15.9h-4.7zM334.3 65.5h4.7v4.4c0 10.2-5.4 16.3-17.6 16.3-12.6 0-17.6-6.1-17.6-16.3v-4.4h4.7V70c0 8.4 4.5 11.6 12.9 11.6 8.5 0 12.9-3.2 12.9-11.6v-4.5zM374.3 45.6h-4.7L362 61.5h5.1l4.9-10.3 4.8 10.3h5l-7.5-15.9zm9.4 19.9h-5l.7 1.5h-14.8l.7-1.5h-5.1l-9.5 19.9h5.2l6.3-13.7h19.2l6.5 13.7h5.2l-9.4-19.9zM404.6 45.6h4.7v15.9h-4.7zM434.4 80.8v4.6h-29.8V65.5h4.7v15.3z"
                  class="fill-[#5e686f]"></path>
                <path
                  d="M18.3 28.8c0 1.8-1.9 2.9-4.4 2.9-2.7 0-5.2-1.6-5.2-5.1 0-2.6 2.1-5 5.3-5 2.3 0 3.6 1.2 4.1 1.8l-.8.8c-.6-.5-1.7-1.5-3.3-1.5-2.6 0-4.2 1.9-4.2 3.8 0 2.3 1.6 4 4.2 4 2.1 0 3.2-1 3.2-1.8v-1.4h-3.3v-1.1h4.5v2.6h-.1zM32.7 31.5h-1.3l-2.2-4h-3.8v4h-1.1v-9.7H29c1.5 0 3.9.3 3.9 2.8 0 2.1-1.3 2.8-2.5 2.9l2.3 4zm-3.2-5.2c1.3 0 2.3-.2 2.3-1.7 0-1.2-1.1-1.7-2.1-1.7h-4.3v3.4h4.1zM43.4 21.6c3 0 5.2 2.3 5.2 5s-2.2 5-5.2 5-5.2-2.3-5.2-5 2.3-5 5.2-5zm0 9c2.3 0 4.1-1.8 4.1-3.9s-1.7-3.9-4.1-3.9-4.1 1.8-4.1 3.9 1.8 3.9 4.1 3.9zM63.4 27.7c0 2.5-1.3 4-4.3 4s-4.3-1.5-4.3-4v-5.9H56v5.9c0 2.1 1.1 2.8 3.1 2.8s3.1-.8 3.1-2.8v-5.9h1.1v5.9h.1zM71.5 31.5h-1.1v-9.7h5.3c1.2 0 3 .5 3 2.8 0 2.1-1.3 2.8-3 2.8h-4.2v4.1zm4.2-5.3c1.1 0 1.9-.3 1.9-1.6 0-1.4-.9-1.6-1.9-1.6h-4.2v3.3l4.2-.1z"
                  class="fill-[#364750]"></path>
                <path
                  d="M18.3 28.8c0 1.8-1.9 2.9-4.4 2.9-2.7 0-5.2-1.6-5.2-5.1 0-2.6 2.1-5 5.3-5 2.3 0 3.6 1.2 4.1 1.8l-.8.8c-.6-.5-1.7-1.5-3.3-1.5-2.6 0-4.2 1.9-4.2 3.8 0 2.3 1.6 4 4.2 4 2.1 0 3.2-1 3.2-1.8v-1.4h-3.3v-1.1h4.5v2.6h-.1zM32.7 31.5h-1.3l-2.2-4h-3.8v4h-1.1v-9.7H29c1.5 0 3.9.3 3.9 2.8 0 2.1-1.3 2.8-2.5 2.9l2.3 4zm-3.2-5.2c1.3 0 2.3-.2 2.3-1.7 0-1.2-1.1-1.7-2.1-1.7h-4.3v3.4h4.1zM43.4 21.6c3 0 5.2 2.3 5.2 5s-2.2 5-5.2 5-5.2-2.3-5.2-5 2.3-5 5.2-5zm0 9c2.3 0 4.1-1.8 4.1-3.9s-1.7-3.9-4.1-3.9-4.1 1.8-4.1 3.9 1.8 3.9 4.1 3.9zM63.4 27.7c0 2.5-1.3 4-4.3 4s-4.3-1.5-4.3-4v-5.9H56v5.9c0 2.1 1.1 2.8 3.1 2.8s3.1-.8 3.1-2.8v-5.9h1.1v5.9h.1zM71.5 31.5h-1.1v-9.7h5.3c1.2 0 3 .5 3 2.8 0 2.1-1.3 2.8-3 2.8h-4.2v4.1zm4.2-5.3c1.1 0 1.9-.3 1.9-1.6 0-1.4-.9-1.6-1.9-1.6h-4.2v3.3l4.2-.1zM12.1 106.4h-.8V100H8.6v-.8h6.1v.8h-2.6v6.4zM25.1 106.4H19v-7.2h5.9v.8h-5.1v2.2h2.7v.8h-2.7v2.5h5.3v.9zM36.4 105.1c-.4.4-1.3 1.4-3.5 1.4-2 0-4-1.3-4-3.8s2-3.8 3.9-3.8c2 0 3.1 1.1 3.5 1.4l-.6.6c-.4-.3-1.4-1.2-2.9-1.2-1.8 0-3 1.4-3 2.9s1.2 2.9 3.2 2.9c1.7 0 2.5-.9 2.8-1.2l.6.8zM47.3 106.4h-.8V103h-4.6v3.3H41v-7.2h.8v3h4.6v-3h.8v7.3h.1zM58.9 106.4h-.8l-4.7-5.9v5.9h-.8v-7.2h.8l4.7 6v-6h.8v7.2zM67.5 99c2.2 0 3.9 1.7 3.9 3.8s-1.7 3.8-3.9 3.8-3.9-1.7-3.9-3.8 1.6-3.8 3.9-3.8zm0 6.7c1.7 0 3-1.3 3-2.9s-1.3-2.9-3-2.9-3 1.3-3 2.9 1.2 2.9 3 2.9zM81.4 106.4H76v-7.2h.8v6.4h4.5l.1.8zM88.7 99c2.2 0 3.9 1.7 3.9 3.8s-1.7 3.8-3.9 3.8-3.9-1.7-3.9-3.8 1.6-3.8 3.9-3.8zm0 6.7c1.7 0 3-1.3 3-2.9s-1.3-2.9-3-2.9-3 1.3-3 2.9 1.2 2.9 3 2.9zM103.7 104.4c0 1.3-1.4 2.2-3.3 2.2-2 0-3.9-1.2-3.9-3.8 0-1.9 1.6-3.7 4-3.7 1.7 0 2.7.9 3.1 1.3l-.6.6c-.5-.4-1.3-1.1-2.5-1.1-1.9 0-3.1 1.4-3.1 2.9 0 1.7 1.2 3 3.1 3 1.6 0 2.4-.7 2.4-1.4v-1h-2.5v-.8h3.3v1.8zM109.1 106.4h-.8v-7.2h.8v7.2zM120.4 106.4h-6.1v-7.2h5.9v.8h-5.1v2.2h2.7v.8h-2.7v2.5h5.3v.9zM139.5 106.4h-.7l-3.4-7.2h1l2.8 6 2.8-6h1l-3.5 7.2zM147.8 106.4h-.8v-7.2h.8v7.2zM159.2 106.4h-1l-1.7-3h-2.9v3h-.8v-7.2h3.6c1.1 0 2.9.2 2.9 2.1 0 1.6-1 2.1-1.8 2.1l1.7 3zm-2.4-3.8c1 0 1.7-.1 1.7-1.3 0-.9-.8-1.2-1.6-1.2h-3.2v2.5h3.1zM166.5 106.4h-.8V100H163v-.8h6.1v.8h-2.6v6.4zM179.6 103.6c0 1.8-.8 3-3 3-2.3 0-3.2-1.1-3.2-3v-4.4h.8v4.4c0 1.5.8 2.1 2.3 2.1s2.3-.6 2.3-2.1v-4.4h.8v4.4zM191.1 106.4H185v-7.2h5.9v.8h-5.1v2.2h2.7v.8h-2.7v2.5h5.3v.9zM200.9 106.4h-5.4v-7.2h.8v6.4h4.5l.1.8zM210.2 106.4h-5.4v-7.2h.8v6.4h4.5l.1.8zM220.1 106.4H214v-7.2h5.9v.8h-5.1v2.2h2.7v.8h-2.7v2.5h5.3v.9zM237.1 106.4h-.8v-7.2h4c.9 0 2.3.4 2.3 2.1 0 1.5-1 2.1-2.3 2.1h-3.1l-.1 3zm3.2-3.9c.8 0 1.4-.2 1.4-1.2s-.7-1.2-1.4-1.2h-3.1v2.4h3.1zM250.2 99c2.2 0 3.9 1.7 3.9 3.8s-1.7 3.8-3.9 3.8-3.9-1.7-3.9-3.8 1.7-3.8 3.9-3.8zm0 6.7c1.7 0 3-1.3 3-2.9s-1.3-2.9-3-2.9-3 1.3-3 2.9 1.3 2.9 3 2.9zM265 103.6c0 1.8-.8 3-3 3-2.3 0-3.2-1.1-3.2-3v-4.4h.8v4.4c0 1.5.8 2.1 2.3 2.1s2.3-.6 2.3-2.1v-4.4h.8v4.4zM276.6 106.4h-1l-1.7-3H271v3h-.8v-7.2h3.6c1.1 0 2.9.2 2.9 2.1 0 1.6-1 2.1-1.8 2.1l1.7 3zm-2.4-3.8c1 0 1.7-.1 1.7-1.3 0-.9-.8-1.2-1.6-1.2h-3.2v2.5h3.1zM299.2 103.6c0 1.8-.8 3-3 3-2.3 0-3.2-1.1-3.2-3v-4.4h.8v4.4c0 1.5.8 2.1 2.3 2.1s2.3-.6 2.3-2.1v-4.4h.8v4.4zM311 106.4h-.8l-4.7-5.9v5.9h-.8v-7.2h.8l4.7 6v-6h.8v7.2zM335 106.4h-.8v-5.5l-2.7 4.9-2.7-4.9v5.5h-.8v-7.2h.8l2.7 4.9 2.7-4.9h.8v7.2zM343.6 99c2.2 0 3.9 1.7 3.9 3.8s-1.7 3.8-3.9 3.8-3.9-1.7-3.9-3.8 1.6-3.8 3.9-3.8zm0 6.7c1.7 0 3-1.3 3-2.9s-1.3-2.9-3-2.9-3 1.3-3 2.9 1.2 2.9 3 2.9zM358.5 106.4h-.8l-4.7-5.9v5.9h-.8v-7.2h.8l4.7 6v-6h.8v7.2zM367.1 99.2c2.5 0 3.3 2.3 3.3 3.6s-.7 3.6-3.3 3.6h-3.5v-7.2h3.5zm0 6.3c1.6 0 2.5-1.6 2.5-2.8 0-1.2-.8-2.8-2.5-2.8h-2.7v5.6h2.7zM381 106.4h-6.1v-7.2h5.9v.8h-5.1v2.2h2.7v.8h-2.7v2.5h5.3v.9zM403.4 106.4h-1l-1.7-3h-2.9v3h-.8v-7.2h3.6c1.1 0 2.9.2 2.9 2.1 0 1.6-1 2.1-1.8 2.1l1.7 3zm-2.4-3.8c1 0 1.7-.1 1.7-1.3 0-.9-.8-1.2-1.6-1.2h-3.2v2.5h3.1zM414.1 106.4H408v-7.2h5.9v.8h-5.1v2.2h2.7v.8h-2.7v2.5h5.3v.9zM424.6 106.4h-6.1v-7.2h5.9v.8h-5.1v2.2h2.7v.8h-2.7v2.5h5.3v.9zM434.4 106.4H429v-7.2h.8v6.4h4.5v.8h.1z"
                  class="fill-[#364750]"></path>
                <circle cx="119.1" cy="33.4" r="2.8" class="fill-[#ae1e24]"
                ></circle>
                <circle cx="133.5" cy="17.1" r="4.4" class="fill-[#ae1e24]"
                ></circle>
                <circle cx="158.8" cy="12.5" r="6" class="fill-[#ae1e24]"
                ></circle>
                <circle
                  cx="189.5"
                  cy="24.5"
                  r="8"
                  style="fill: none; stroke: rgb(174, 30, 36); stroke-width: 3; stroke-miterlimit: 10;"
                >
                </circle>
                <path
                  d="M411.3 98.5h-.9l.8-1.2h1.3l-1.2 1.2z"
                  class="fill-[#364750]"
                >
                </path>
              </svg>
            </a>
          </li>
          <li class="splide__slide badge univirtual">
            <a href="https://www.i-w-s-logiciel.com" target="_blank">
              <img
                src="https://www.i-w-s-logiciel.com/_next/image?url=%2Fimages%2Fiws_logo.webp&w=1920&q=90"
                alt="iws logiciel branding website"
                class="p-10"
                loading="lazy"
              />
            </a>
          </li>
          <li class="splide__slide badge decalog">
            <a href="https://www.decalog.net" target="_blank">
              <img
                src="https://www.decalog.net/wp-content/uploads/2023/01/cropped-LogDecalogCarre.jpg"
                alt="decalog branding website"
                loading="lazy"
              />
            </a>
          </li>
          <li class="splide__slide badge lc">
            <a href="https://www.lavandesetcompagnie.com" target="_blank">
              <img
                src="https://www.lavandesetcompagnie.com/img/logo-1637695046.jpg"
                alt="lavandesandcie branding website"
                loading="lazy"
              />
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div
      id="contact-me-for-next-project"
      class="translate-x-full duration-1000 ease-out"
    >
      <p
        class="text-center text-xl font-semibold text-slate-700 dark:text-slate-50"
      >
        I'm looking forward to study your needs and ideas as my next project...
      </p>
      <Anchor
        variant="rounded"
        colorScheme="primary"
        href="#contact"
        override="my-5"
      >
        Contact me
      </Anchor>
    </div>
  </div>
</section>

<script>
  import '@splidejs/splide/css'
  import Splide from '@splidejs/splide'
  import { useObserver } from '../../hooks/useObserver'

  function carousel() {
    new Splide('#image-carousel', {
      fixedWidth: 300,
      fixedHeight: 200,
      gap: 50,
      rewind: true,
      pagination: false,
    }).mount()

    useObserver<HTMLAnchorElement>('#carousel-section', () => {
      const nextProjectDivEl = document.querySelector<HTMLDivElement>(
        '#contact-me-for-next-project',
      )
      if (!nextProjectDivEl) return

      nextProjectDivEl.classList.remove('translate-x-full', 'opacity-0')
      nextProjectDivEl.classList.add('animate-fadein')
    })
  }
  carousel()
  document.addEventListener('astro:page-load', carousel)
</script>

<style>
  .splide__slide {
    @apply relative my-4 overflow-hidden rounded bg-white p-2 shadow hover:shadow-lg;
  }

  .badge {
    @apply after:absolute after:-right-8 after:bottom-4 after:z-10 after:block after:h-fit after:w-32 after:-rotate-45 after:p-1 after:text-center after:text-xs after:uppercase after:text-white;
  }

  .decalog {
    @apply after:bg-red-700 after:content-["2014-2020"];
  }

  .lc {
    @apply after:bg-orange-700 after:content-["2015-2021"];
  }

  .univirtual {
    @apply after:bg-green-700 after:content-["2021-now"];
  }

  .splide__slide img {
    @apply h-full w-full object-contain;
  }
</style>
